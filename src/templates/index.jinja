{% extends "base.jinja" %}

{% block content %}
    <div class="row">
        <div id="about" class="col-12">
            <h1 class="fw-bold">About</h1>
            <p>Observe existence <span class="iconify" data-icon="fa-solid:eye"></span>, drink tea <span class="iconify" data-icon="fa:coffee"></span>, experiment <span class="iconify" data-icon="icon-park-solid:experiment"></span>, cognize <span class="iconify" data-icon="fa-solid:pen-alt"></span></p>
	</div>
    </div>
    <div class="row mt-2">
        {% if memocards_enabled or analytics_enabled or monitoring_enabled or statuspage_enabled %}
	<div id="services" class="col-sm-12 col-md-12 col-lg-6 mb-3">
            <h2 class="card-title mb-0 fw-bold">Live services</h2>
            <small>Click and test it out</small>
            <ul class="list-group list-group-flush">
                {% if memocards_enabled %}
                <li class="list-group-item border-0 ps-0">
                    <a class="{% if track_analytics %}umami--click--services-memo{% endif %}" target="_blank" rel="noopener noreferrer" href="{{ memocards_service_address }}">Memo cards <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M15.986 4a2.25 2.25 0 0 0-2.236-2h-3.5a2.25 2.25 0 0 0-2.236 2H6.25A2.25 2.25 0 0 0 4 6.25v13.5A2.25 2.25 0 0 0 6.25 22h4.751a2.113 2.113 0 0 1 .063-.593l.227-.907H6.25a.75.75 0 0 1-.75-.75V6.25a.75.75 0 0 1 .75-.75h2.129c.404.603 1.091 1 1.871 1h3.5c.78 0 1.467-.397 1.871-1h2.129a.75.75 0 0 1 .75.75v5.61c.437-.4.956-.66 1.5-.781V6.25A2.25 2.25 0 0 0 17.75 4zm.009.096L16 4.25c0-.052-.002-.103-.005-.154M10.25 3.5h3.5a.75.75 0 0 1 0 1.5h-3.5a.75.75 0 0 1 0-1.5M13.356 17H8a.75.75 0 0 0 0 1.5h3.983c.145-.229.315-.442.508-.635zM12 14.5H8A.75.75 0 0 1 8 13h4a.75.75 0 0 1 0 1.5m4-4H8A.75.75 0 0 1 8 9h8a.75.75 0 0 1 0 1.5m3.1 2.17l-5.903 5.902a2.686 2.686 0 0 0-.706 1.247l-.458 1.831a1.087 1.087 0 0 0 1.319 1.318l1.83-.457a2.685 2.685 0 0 0 1.248-.707l5.902-5.902A2.286 2.286 0 0 0 19.1 12.67"/></svg></a>
                    <br><small class="text-dark">Service helps to memorize and repeat words to enrich a vocubalary.</small>
                </li>
                {% endif %}
                 {% if engqa_enabled %}
                <li class="list-group-item border-0 ps-0">
                    <a class="{% if track_analytics %}umami--click--services-engqa{% endif %}" target="_blank" rel="noopener noreferrer" href="{{ engqa_service_address }}">Eng QA <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24"><path fill="currentColor" d="M13.75 2a2.25 2.25 0 0 1 2.236 2h1.764A2.25 2.25 0 0 1 20 6.25V13h-1.5V6.25a.75.75 0 0 0-.75-.75h-2.129c-.404.603-1.091 1-1.871 1h-3.5c-.78 0-1.467-.397-1.871-1H6.25a.75.75 0 0 0-.75.75V13H4V6.25A2.25 2.25 0 0 1 6.25 4h1.764a2.25 2.25 0 0 1 2.236-2zm2.245 2.096L16 4.25c0-.052-.002-.103-.005-.154M13.75 3.5h-3.5a.75.75 0 0 0 0 1.5h3.5a.75.75 0 0 0 0-1.5m4.75 13H20v3.25A2.25 2.25 0 0 1 17.75 22H6.25A2.25 2.25 0 0 1 4 19.75V16.5h1.5v3.25c0 .414.336.75.75.75h11.5a.75.75 0 0 0 .75-.75zm-7.53-7.962a.75.75 0 0 0-1.39-.123L6.785 14H2.75a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 .67-.415l2.148-4.295l1.963 6.672a.75.75 0 0 0 1.39.123l1.889-3.778l.797 1.329a.75.75 0 0 0 .643.364h4.5a.75.75 0 0 0 0-1.5h-4.075l-1.282-2.136a.75.75 0 0 0-1.314.05l-1.647 3.296z"/></svg></a>
                    <br><small class="text-dark">LLM answers to comprehend a vocubalary better.</small>
                </li>
                {% endif %}
                {% if analytics_enabled %}
                <li class="list-group-item border-0 ps-0">
                    <a class="{% if track_analytics %}umami--click--services-analytics{% endif %}" target="_blank" rel="noopener noreferrer" href="{{ analytics_service_page }}">Analytics <span class="iconify" data-icon="fa6-solid:chart-simple"></span></a>
                    <br><small class="text-dark">Web analytics <strong>Umami</strong>. Tracking page views and link clicks.</small>
                </li>
                {% endif %}
                {% if monitoring_enabled %}
                <li class="list-group-item border-0 ps-0">
                    <a class="{% if track_analytics %}umami--click--services-monitoring{% endif %}" target="_blank" rel="noopener noreferrer" href="{{ monitoring_service_page }}">Monitoring <span class="iconify" data-icon="fontisto:area-chart"></span></a>
                    <br><small class="text-dark">Monitoring resources With <strong>Grafana</strong> consumed by live service containers.</small>
                </li>
                {% endif %}
                {% if statuspage_enabled %}
                <li class="list-group-item border-0 ps-0">
                    <a class="{% if track_analytics %}umami--click--services-statuspage{% endif %}" target="_blank" rel="noopener noreferrer" href="{{ statuspage_service_page }}">Status Page <span class="iconify" data-icon="akar-icons:circle-check-fill"></span></a>
                    <br><small class="text-dark">Check for the live services are running.</small>
                </li>
                {% endif %}
            </ul>
	</div>
        {% endif %}
        <div id="profiles" class="col-sm-6 col-md-6 col-lg-3 mb-3">
            <h2 class="card-title mb-0 fw-bold">Profiles</h2>
            <small>Public info</small>
            <ul class="list-group list-group-flush">
                <li class="list-group-item border-0 ps-0"><a class="me-1 {% if track_analytics %}umami--click--profiles-github{% endif %}" target="_blank" rel="noopener noreferrer" href="https://github.com/4l1fe">Github <span class="iconify" data-icon="fa-brands:github"></span></a></li>
                <li class="list-group-item border-0 ps-0"><a class="me-1 {% if track_analytics %}umami--click--profiles-linkedin{% endif %}" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/dmitrii-krasnov">Linkedin <span class="iconify" data-icon="brandico:linkedin-rect"></span></a></li>
                <li class="list-group-item border-0 ps-0"><a class="me-1 {% if track_analytics %}umami--click--profiles-telegram{% endif %}" target="_blank" rel="noopener noreferrer" href="https://t.me/kvdm_dev">Telegram <span class="iconify" data-icon="fa:telegram"></span></a></li>
            </ul>
        </div>
        <div id="photo" class="col-sm-6 col-md-6 col-lg-3 mb-3">
            <img src="files/photo.jpg" class="img-fluid rounded">
        </div>            
    </div>

    {% macro wrap_if_selected(text, wrapped_view) -%}
        {%- if selected_view == wrapped_view -%}
            {{ text }}<span class="iconify" data-icon="bi:arrow-left-short"></span>
        {%- else -%}
            {{ text }}
        {%- endif %}
    {%- endmacro %}

    <div class="row mt-4">
        <div class="col-12">
            <h2 class="d-inline me-2 fw-bold">Articles</h2>
            <a class="me-1 {% if track_analytics %}umami--click--articles-subscribe{% endif %}" href="rss.xml">Subscribe <span class="iconify" data-icon="bi:rss-fill"></span></a>
            <ul class="list-inline mt-1 mb-3 fs-6">
                <li class="list-inline-item text-muted">Select a view</li>
                <li class="list-inline-item"><a href="/">{{ wrap_if_selected("Titles", IndexViewEnum.default) }}</a></li>
                <li class="list-inline-item"><a href="/views/preview">{{ wrap_if_selected("Previews", IndexViewEnum.preview) }}</a></li>
                <li class="list-inline-item"><a href="/views/summary">{{ wrap_if_selected("LLM Summaries", IndexViewEnum.summary) }}</a></li>
            </ul>
        </div>
    </div>

    {% set view_ns = namespace(article_row_mb = "mb-2") %}
    {% if selected_view == IndexViewEnum.preview %}
        {% set view_ns.article_row_mb = "mb-5" %}
    {% endif %}

    {% for adata in articles_data %}
    <div class="row row-article {{ view_ns.article_row_mb }}">
        <div class="col-lg-10">
            <h3 class="fs-4 fw-light"><a class="link-dark" href="{{ adata.relative_link | trailing_slash }}">{{ adata.title }}</a></h3>
        </div>

        <div class="col-lg-2 text-lg-start">
            <p class="text-muted"><span class="iconify me-1" data-icon="ic:round-date-range"></span>{{ adata.created_date.strftime("%m-%Y") }}</p>
        </div>

        {% if selected_view == IndexViewEnum.preview %}
        <div class="col-lg-10">
            <div class="row">
                <div class="col-lg-3 col-4">
                    <img src="{{ view_data[adata.created_date]['main_thumbnail'] }}" class="img-fluid">
                </div>
                <div class="col-lg-9 col-8">
                    {% for thumbnail_link in view_data[adata.created_date]['thumbnails'] %}
                    <img src="{{ thumbnail_link }}" class="img-fluid">
                    {% endfor %}
                </div>
            </div>
        </div>

        {% elif selected_view == IndexViewEnum.summary %}
        <div class="col-lg-10">
            <p class="fs-6 text-muted mb-1"><small><span class="iconify" data-icon="ph:cube-fill"></span> Generated by ChatGPT</small></p>
            <div class="border-start">
                <p class="fs-6 lh-sm ps-3">{{ view_data[adata.created_date] }}</p>
            </div>
        </div>
        {% endif %}
    </div>
    {% endfor %}

{% endblock content %}
